{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "93e60745-0996-463e-98ae-ae5758685efc",
            "version": "KqlParameterItem/1.0",
            "name": "Label",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "3ddc8a08-b8e0-4f90-b98c-601b2a516d3b",
            "version": "KqlParameterItem/1.0",
            "name": "ConnectionError",
            "type": 1,
            "value": "Your monitoring VM does not appear to have access to the following SQL resource. Please refer to our documentation for enabling network access for your monitoring VM to access your SQL resource.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "065ac233-ec81-4b7f-83d8-34f243b536e8",
            "version": "KqlParameterItem/1.0",
            "name": "SQLLogin",
            "type": 1,
            "value": "The SQL login credentials used by your monitoring VM appears to be incorrect. Please refer to our documentation for creating the telegraf user, the permissions it needs, and setting the configuration on your monitoring VM. If using a Key Vault to store the password as a secret, please confirm it is using the correct value.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "bdcb7f91-c934-4f5a-9015-84ed45d27206",
            "version": "KqlParameterItem/1.0",
            "name": "KeyVaultSecret",
            "type": 1,
            "value": "The name of the Key Vault secret provided in your monitoring profile appears to be incorrect. Please refer to our documentation for providing the Key Vault secret name and setting the configuration on your monitoring VM.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "e539b4dd-a1b9-49a2-b8ad-5a2247651aad",
            "version": "KqlParameterItem/1.0",
            "name": "KeyVaultAccess",
            "type": 1,
            "value": "The monitoring VM does not have get permission on the Key vault secret provided in your monitoring profile. To correct this, you can select the Key Vault on the edit profile page to grant your monitoring Vm acess to the key vault secret. Please refer to our documentation for more details.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "94b40d89-f7cd-48d3-bc33-67608f3429a2",
            "version": "KqlParameterItem/1.0",
            "name": "KeyvaultSecretDisabled",
            "type": 1,
            "value": "The Key vault secret your are trying to access has been disabled.  To correct this, you can either re-enable the secret from your Key Vault or create a new one. If you create a new secret, you will need to update your monitoring profile to reference it. Please refer to our documentation for more details.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "94b40d89-f7cd-48d3-bc33-67608f3429a5",
            "version": "KqlParameterItem/1.0",
            "name": "UserPermission",
            "type": 1,
            "value": "The user does not have permission to view the database state. To correct this, you need to grant VIEW DATABASE STATE permissions by running <code>GRANT VIEW DATABASE STATE TO [<username>];<//code>. Please refer to our documentation for more details.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "94b40d89-f7cd-48d3-bc33-67608f3429a3",
            "version": "KqlParameterItem/1.0",
            "name": "FirewallAccess",
            "type": 1,
            "value": "The SQL DB firewall is blocking access to the server.  To correct this, use the Windows Azure Management Portal or run sp_set_firewall_rule on the master database to create a firewall rule for this IP address or address range. It may take up to five minutes for this change to take effect. Please refer to our documentation for more details.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "94b40d89-f7cd-48d3-bc33-67608f3429a4",
            "version": "KqlParameterItem/1.0",
            "name": "ClientNotInVnet",
            "type": 1,
            "value": "The server was not found or was not accessible. It is possible that the client machine is not in the Virtual network. Please refer to our documentation for more details.",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text"
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "3f6b286e-a041-4c57-85ce-f6c97e170879",
            "version": "KqlParameterItem/1.0",
            "name": "Description",
            "type": 1,
            "value": "No actionable item. Please contact support",
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Key Vault disabled secret error",
                  "resultValType": "param",
                  "resultVal": "KeyvaultSecretDisabled"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Key Vault permission error",
                  "resultValType": "param",
                  "resultVal": "KeyVaultAccess"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Key Vault secret error",
                  "resultValType": "param",
                  "resultVal": "KeyVaultSecret"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "SQL login error",
                  "resultValType": "param",
                  "resultVal": "SQLLogin"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Connection error",
                  "resultValType": "param",
                  "resultVal": "ConnectionError"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "User does not have permission",
                  "resultValType": "param",
                  "resultVal": "UserPermission"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Firewall is blocking access",
                  "resultValType": "param",
                  "resultVal": "FirewallAccess"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Client machine is not in Virtual Network",
                  "resultValType": "param",
                  "resultVal": "ClientNotInVnet"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "No actionable item. Please contact support"
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "f34d4166-47bd-41e4-a18c-b9fd65d88b1d",
            "version": "KqlParameterItem/1.0",
            "name": "Error",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "6d3773a7-f3e5-4c74-9b73-4f317ee1db4c",
            "version": "KqlParameterItem/1.0",
            "name": "Link",
            "type": 1,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Key Vault permission error",
                  "resultValType": "static",
                  "resultVal": "https://go.microsoft.com/fwlink/?linkid=2125287"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Label",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Firewall is blocking access",
                  "resultValType": "static",
                  "resultVal": "https://docs.microsoft.com/en-us/azure/azure-sql/database/firewall-configure"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "https://aka.ms/sqlinsights/ui/links/setup"
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            }
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "conditionalVisibility": {
        "parameterName": "visible",
        "comparison": "isNotEqualTo"
      },
      "name": "Parameters block"
    },
    {
      "type": 1,
      "content": {
        "json": "# {Label}",
        "style": "error"
      },
      "name": "Header"
    },
    {
      "type": 1,
      "content": {
        "json": "<code>{Error}</code>\r\n\r\n---\r\n\r\n__Description__: {Description}\r\n\r\n__Troubleshooting Link__: {Link}\r\n"
      },
      "name": "Description"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}